module Hearth
  class InterceptorList
    include Enumerable[_Interceptor]

    def initialize: (?Array[_Interceptor] interceptors) -> void

    def add: (_Interceptor interceptor) -> void

    alias << add

    # TODO: remove this from public api
    def apply: (hook: untyped, input: untyped, context: untyped, output: untyped, ?aggregate_errors: bool) -> untyped

    def dup: () -> InterceptorList

    def each: () ?{ (_Interceptor) -> untyped } -> untyped
  end
end
